!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.smarkdown={})}(this,function(e){"use strict";var t=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s=/[&<>"']/,n=/[&<>"']/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=/[<>"']|&(?!#?\w+;)/,o=/[<>"']|&(?!#?\w+;)/g;function l(e,t){if(t){if(s.test(e))return e.replace(n,function(e){return i[e]})}else if(r.test(e))return e.replace(o,function(e){return i[e]});return e}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var a=/<(?:.|\n)*?>/gm,u=/[!\"#$%&'\(\)\*\+,\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,p=/(\s|\.)/g;function c(e){return e.replace(a,"").replace(u,"").replace(p,"-").toLowerCase()}var g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,f=/^[^:]+:\/*[^/]*$/,d={};function k(e,t){if(g.test(t))return t;var s=" "+e;return d[s]||(f.test(e)?d[s]=e+"/":d[s]=e.replace(/[^/]*$/,"")),e=d[s],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}function x(){}x.exec=x;var b,m=function(){function e(e,t){void 0===t&&(t=""),this.source=e.source,this.flags=t}return e.prototype.setGroup=function(e,t){var s="string"==typeof t?t:t.source;return s=s.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(e,s),this},e.prototype.getRegex=function(){return new RegExp(this.source,this.flags)},e}();(b=e.TokenType||(e.TokenType={}))[b.space=1]="space",b[b.text=2]="text",b[b.paragraph=3]="paragraph",b[b.heading=4]="heading",b[b.listStart=5]="listStart",b[b.listEnd=6]="listEnd",b[b.looseItemStart=7]="looseItemStart",b[b.looseItemEnd=8]="looseItemEnd",b[b.listItemStart=9]="listItemStart",b[b.listItemEnd=10]="listItemEnd",b[b.blockquoteStart=11]="blockquoteStart",b[b.blockquoteEnd=12]="blockquoteEnd",b[b.code=13]="code",b[b.table=14]="table",b[b.html=15]="html",b[b.hr=16]="hr",b[b.footnote=17]="footnote";var y=function(){return function(){this.gfm=!0,this.tables=!0,this.extra=!1,this.breaks=!1,this.pedantic=!1,this.sanitize=!1,this.mangle=!0,this.smartLists=!1,this.silent=!1,this.baseUrl=null,this.linksInNewTab=!1,this.disabledRules=[],this.langPrefix="language-",this.langAttribute=!1,this.smartypants=!1,this.headerId="",this.headerPrefix="",this.xhtml=!1,this.escape=l,this.unescape=h,this.slug=c,this.noop=x,this.resolveUrl=k}}(),T=function(){function s(e,t){this.staticThis=e,this.links={},this.tokens=[],this.options=t,this.setRules()}return s.lex=function(e,t,s){return new this(this,t).getTokens(e,s)},s.getRulesBase=function(){if(this.rulesBase)return this.rulesBase;var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(#+ *)?(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:new RegExp("^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))"),def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,_comment:/<!--(?!-?>)[\s\S]*?-->/};e.def=new m(e.def).setGroup("label",e._label).setGroup("title",e._title).getRegex(),e.item=new m(e.item,"gm").setGroup(/bull/g,e.bullet).getRegex(),e.list=new m(e.list).setGroup(/bull/g,e.bullet).setGroup("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").setGroup("def","\\n+(?="+e.def.source+")").getRegex();var t="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";return e.html=new m(e.html,"i").setGroup("comment",e._comment).setGroup("tag",t).setGroup("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),e.paragraph=new m(e.paragraph).setGroup("hr",e.hr).setGroup("heading",e.heading).setGroup("lheading",e.lheading).setGroup("blockquote",e.blockquote).setGroup("tag",t).getRegex(),e.blockquote=new m(e.blockquote).setGroup("paragraph",e.paragraph).getRegex(),this.rulesBase=e},s.getRulesPedantic=function(){if(this.rulesPedantic)return this.rulesPedantic;var e=this.getRulesBase(),s=new m(new RegExp("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))")).setGroup("comment",e._comment).setGroup(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),n=t({},e,{html:s,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/});return this.rulesPedantic=n},s.getRulesGfm=function(){if(this.rulesGfm)return this.rulesGfm;var e=this.getRulesBase(),s=t({},e,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,checkbox:/^\[([ xX])\] +/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *(#*) *(?:\n+|$)/}),n=s.fences.source.replace("\\1","\\2"),i=e.list.source.replace("\\1","\\3");return s.paragraph=new m(e.paragraph).setGroup("(?!","(?!"+n+"|"+i+"|").getRegex(),this.rulesGfm=s},s.getRulesTable=function(){return this.rulesTables?this.rulesTables:this.rulesTables=t({},this.getRulesGfm(),{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/})},s.getRulesExtra=function(){if(this.rulesExtra)return this.rulesExtra;var e=this.getRulesTable();return e.paragraph=new m(e.paragraph).setGroup("footnote",/^\[\^([^\]]+)\]: *([^\n]*(?:\n+|$)(?: {1,}[^\n]*(?:\n+|$))*)/).getRegex(),this.rulesExtra=t({},e,{footnote:/^\[\^([^\]]+)\]: ([^\n]+)/})},s.prototype.setRules=function(){var e=this;this.options.extra?this.rules=this.staticThis.getRulesExtra():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.options.disabledRules.forEach(function(t){e.rules[t]=e.options.noop}),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table,this.hasRulesExtra=void 0!==this.rules.footnote},s.prototype.getTokens=function(t,s){var n,i=t;e:for(;i;)if((n=this.rules.newline.exec(i))&&(i=i.substring(n[0].length),n[0].length>1&&this.tokens.push({type:e.TokenType.space})),n=this.rules.code.exec(i)){i=i.substring(n[0].length);var r=n[0].replace(/^ {4}/gm,"");this.tokens.push({type:e.TokenType.code,text:this.options.pedantic?r:this.rtrim(r,"\n")})}else if(this.hasRulesGfm&&(n=this.rules.fences.exec(i)))i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.code,lang:n[2],text:n[3]||""});else if(this.hasRulesExtra&&(n=this.rules.footnote.exec(i))){i=i.substring(n[0].length);var o={type:e.TokenType.footnote,refname:this.options.slug(n[1]),text:n[2]};this.tokens.push(o)}else if(n=this.rules.heading.exec(i))i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.heading,depth:n[1].length,text:n[2],ends:n[3]||""});else if(s&&this.hasRulesTables&&(n=this.rules.nptable.exec(i))){o={type:e.TokenType.table,header:this.splitCells(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/\n$/,"").split("\n"):[]};for(var l=0;l<o.align.length;l++)/^ *-+: *$/.test(o.align[l])?o.align[l]="right":/^ *:-+: *$/.test(o.align[l])?o.align[l]="center":/^ *:-+ *$/.test(o.align[l])?o.align[l]="left":o.align[l]=null;var h=n[3].replace(/\n$/,"").split("\n");for(l=0;l<h.length;l++)o.cells[l]=this.splitCells(h[l],o.header.length);this.tokens.push(o)}else if(n=this.rules.hr.exec(i))i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.hr});else if(n=this.rules.blockquote.exec(i)){i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.blockquoteStart});var a=n[0].replace(/^ *> ?/gm,"");this.getTokens(a),this.tokens.push({type:e.TokenType.blockquoteEnd})}else if(n=this.rules.list.exec(i)){i=i.substring(n[0].length);var u=n[2],p=u.length>1;this.tokens.push({type:e.TokenType.listStart,ordered:p,start:p?+u:""});var c=(a=n[0].match(this.rules.item)).length,g=!1,f=void 0,d=void 0,k=void 0;for(l=0;l<c;l++){var x=null;f=(o=a[l]).length,o=o.replace(/^ *([*+-]|\d+\.) +/,""),this.hasRulesGfm&&(n=this.rules.checkbox.exec(o))&&(x=" "!==n[1],o=o.replace(this.rules.checkbox,"")),-1!==o.indexOf("\n ")&&(f-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u===(d=this.staticThis.getRulesBase().bullet.exec(a[l+1])[0])||u.length>1&&d.length>1||(i=a.slice(l+1).join("\n")+i,l=c-1)),k=g||/\n\n(?!\s*$)/.test(o),l!==c-1&&(g="\n"===o.charAt(o.length-1),k||(k=g)),this.tokens.push({checked:x,type:k?e.TokenType.looseItemStart:e.TokenType.listItemStart}),this.getTokens(o,!1),this.tokens.push({type:e.TokenType.listItemEnd})}this.tokens.push({type:e.TokenType.listEnd})}else if(n=this.rules.html.exec(i)){i=i.substring(n[0].length);var b=n[1],m="pre"===b||"script"===b||"style"===b;this.tokens.push({type:this.options.sanitize?e.TokenType.paragraph:e.TokenType.html,pre:!this.options.sanitizer&&m,text:n[0]})}else if(s&&(n=this.rules.def.exec(i))){i=i.substring(n[0].length);var y=n[1].toLowerCase().replace(/\s+/g," ");if(!this.links[y]){var T=n[3];T&&(T=T.substring(1,T.length-1)),this.links[y]={title:T,href:n[2]}}}else if(s&&this.hasRulesTables&&(n=this.rules.table.exec(i))){for(o={type:e.TokenType.table,header:this.splitCells(n[1].replace(/^ *| *\| *$/g,"")),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:n[3]?n[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]},l=0;l<o.align.length;l++)/^ *-+: *$/.test(o.align[l])?o.align[l]="right":/^ *:-+: *$/.test(o.align[l])?o.align[l]="center":/^ *:-+ *$/.test(o.align[l])?o.align[l]="left":o.align[l]=null;for(h=n[3].replace(/(?: *\| *)?\n$/,"").split("\n"),l=0;l<h.length;l++)o.cells[l]=this.splitCells(h[l].replace(/^ *\| *| *\| *$/g,""),o.header.length);this.tokens.push(o)}else{if(this.staticThis.simpleRules.length){var v=this.staticThis.simpleRules;for(l=0;l<v.length;l++)if(n=v[l].exec(i)){i=i.substring(n[0].length);var R="simpleRule"+(l+1);this.tokens.push({type:R,execArr:n});continue e}}if(n=this.rules.lheading.exec(i))i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.heading,depth:"="===n[2]?1:2,text:n[1]});else if(s&&(n=this.rules.paragraph.exec(i)))i=i.substring(n[0].length),"\n"===n[1].slice(-1)?this.tokens.push({type:e.TokenType.paragraph,text:n[1].slice(0,-1)}):this.tokens.push({type:this.tokens.length>0?e.TokenType.paragraph:e.TokenType.text,text:n[1]});else if(n=this.rules.text.exec(i))i=i.substring(n[0].length),this.tokens.push({type:e.TokenType.text,text:n[0]});else if(i)throw new Error("Infinite loop on byte: "+i.charCodeAt(0)+", near text '"+i.slice(0,30)+"...'")}return{tokens:this.tokens,links:this.links}},s.prototype.splitCells=function(e,t){var s=e.replace(/\|/g,function(e,t,s){for(var n=!1,i=t;--i>=0&&"\\"===s[i];)n=!n;return n?"|":" |"}).split(/ \|/),n=0;if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(/\\\|/g,"|");return s},s.prototype.rtrim=function(e,t,s){if(void 0===s&&(s=!1),0===e.length)return"";for(var n=0;n<e.length;){var i=e.charAt(e.length-n-1);if(i!==t||s){if(i===t||!s)break;n++}else n++}return e.substr(0,e.length-n)},s.simpleRules=[],s}(),v=function(){function e(e){this.options=e,this._headings=[],this._footnotes=[]}return e.prototype.code=function(e,t,s){if(this.options.highlight){var n=this.options.highlight(e,t);null!=n&&n!==e&&(s=!0,e=n)}return t?"<pre"+(this.options.langAttribute?' data-lang="'+this.options.escape(t,!0)+'"':"")+'><code class="'+this.options.langPrefix+this.options.escape(t,!0)+'">'+(s?e:this.options.escape(e,!0))+"</code></pre>\n":"<pre><code>"+(s?e:this.options.escape(e,!0))+"</code></pre>"},e.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},e.prototype.html=function(e){return e},e.prototype.heading=function(e,t,s,n){var i=this.options.headerId,r="";if("off"===i&&n||"on"===i&&!n){var o=this.options.slug(s),l=this._headings.filter(function(e){return e===s}).length;l>0&&(o+="-"+l),r=' id="'+this.options.headerPrefix+o+'"',this._headings.push(s)}return"<h"+t+r+">"+e+"</h"+t+">\n"},e.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.prototype.list=function(e,t,s,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==s?' start="'+s+'"':"")+">\n"+e+"</"+i+">\n"},e.prototype.listitem=function(e,t){return null===t?"<li>"+e+"</li>\n":'<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" '+(t?"checked ":"")+" disabled> "+e+"</li>\n"},e.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},e.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"\n<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},e.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},e.prototype.tablecell=function(e,t){var s=t.header?"th":"td";return(t.align?"<"+s+' align="'+t.align+'">':"<"+s+">")+e+"</"+s+">\n"},e.prototype.strong=function(e){return"<strong>"+e+"</strong>"},e.prototype.em=function(e){return"<em>"+e+"</em>"},e.prototype.codespan=function(e){return"<code>"+e+"</code>"},e.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.prototype.del=function(e){return"<del>"+e+"</del>"},e.prototype.fnref=function(e){return this._footnotes.includes(e)||this._footnotes.push(e),'<sup id="fnref:'+e+'"><a href="#fn:'+e+'" class="footnote-ref" role="doc-noteref">'+this._footnotes.length+"</a></sup>"},e.prototype.footnote=function(e){for(var t='<div class="footnotes" role="doc-endnotes">'+this.hr()+"<ol>",s=0,n=this._footnotes;s<n.length;s++){var i=n[s];t+='<li id="fn:'+i+'" role="doc-endnote"><span class="cite-text">'+(e[i]||"?")+'</span><a href="#fnref:'+i+'" class="footnote-backref" role="doc-backlink">&#8617;</a></li>'}return t+="</ol></div>",this._footnotes=[],t},e.prototype.link=function(e,t,s){if(this.options.sanitize){var n=void 0;try{n=decodeURIComponent(this.options.unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return s}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return s}this.options.baseUrl&&(e=this.options.resolveUrl(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return s}var i='<a href="'+this.options.escape(e)+'"';t&&(i+=' title="'+t+'"');var r=this.options,o=r.linksInNewTab,l=r.trimLinkText,h=!0===o||"function"==typeof o&&o.call(this,e);return"string"==typeof h?i+=h:h&&(i+=' target="_blank"'),l&&(s=l(s)),i+=">"+s+"</a>"},e.prototype.image=function(e,t,s){this.options.baseUrl&&(e=this.options.resolveUrl(this.options.baseUrl,e));var n='<img src="'+e+'" alt="'+s+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},e.prototype.text=function(e){return e},e}(),R=function(){function e(){}return e.prototype.strong=function(e){return e},e.prototype.em=function(e){return e},e.prototype.codespan=function(e){return e},e.prototype.del=function(e){return e},e.prototype.text=function(e){return e},e.prototype.link=function(e,t,s){return""+s},e.prototype.image=function(e,t,s){return""+s},e.prototype.br=function(){return""},e}(),w=function(){function e(e,t,s,n){void 0===t&&(t={}),this.staticThis=e,this.links=t,this.options=s,this.renderer=n||this.options.renderer||new v(this.options),this.setRules()}return e.output=function(e,t,s){return new this(this,t,s).output(e)},e.getRulesBase=function(){if(this.rulesBase)return this.rulesBase;var e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,tag:new RegExp("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>"),link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)|^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)/,em:/^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*][\s\S]*?[^\s])\*(?!\*)|^_([^\s_])_(?!_)|^\*([^\s*])\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/,_scheme:/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_email:/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_label:/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,_href:/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f()\\]*\)|[^\s\x00-\x1f()\\])*?)/,_title:/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_escapes:/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_attribute:/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/};e.autolink=new m(e.autolink).setGroup("scheme",e._scheme).setGroup("email",e._email).getRegex();return e.tag=new m(e.tag).setGroup("comment",/<!--(?!-?>)[\s\S]*?-->/).setGroup("attribute",e._attribute).getRegex(),e.link=new m(e.link).setGroup("label",e._label).setGroup("href",e._href).setGroup("title",e._title).getRegex(),e.reflink=new m(e.reflink).setGroup("label",e._label).getRegex(),this.rulesBase=e},e.getRulesPedantic=function(){if(this.rulesPedantic)return this.rulesPedantic;var e=this.getRulesBase(),s=new m(/^!?\[(label)\]\((.*?)\)/).setGroup("label",e._label).getRegex(),n=new m(/^!?\[(label)\]\s*\[([^\]]*)\]/).setGroup("label",e._label).getRegex();return this.rulesPedantic=t({},e,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:s,reflink:n})},e.getRulesGfm=function(){if(this.rulesGfm)return this.rulesGfm;var e=this.getRulesBase(),s=new m(e.escape).setGroup("])","~|])").getRegex(),n=new m(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).setGroup("email",e._email).getRegex(),i=new m(e.text).setGroup("]|","~]|").setGroup("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex();return this.rulesGfm=t({},e,{escape:s,url:n,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:i})},e.getRulesBreaks=function(){if(this.rulesBreaks)return this.rulesBreaks;var e=this.getRulesGfm();return this.rulesBreaks=t({},e,{br:new m(e.br).setGroup("{2,}","*").getRegex(),text:new m(e.text).setGroup("{2,}","*").getRegex()})},e.getRulesExtra=function(){if(this.rulesExtra)return this.rulesExtra;var e=this.getRulesBreaks();return this.rulesExtra=t({},e,{fnref:new m(/^!?\[\^(label)\]/).setGroup("label",e._label).getRegex()})},e.prototype.setRules=function(){var e=this;if(this.options.extra?this.rules=this.staticThis.getRulesExtra():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.options.gfm?this.rules=this.options.breaks?this.staticThis.getRulesBreaks():this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.options.inlineSplitChars){var t=this.rules.text.toString(),s=this.options.inlineSplitChars+"]|";t.includes(s)||(this.rules.text=new RegExp(t.replace("]|",s).slice(1,-1)))}this.options.disabledRules.forEach(function(t){e.rules[t]=e.options.noop}),this.hasRulesGfm=void 0!==this.rules.url,this.hasRulesExtra=void 0!==this.rules.fnref},e.prototype.escapes=function(e){return e?e.replace(this.rules._escapes,"$1"):e},e.prototype.output=function(e){var t,s="",n=[e=e,e],i=this.staticThis.simpleRules||[],r=i.filter(function(e){return"before"===e.options.priority}),o=i.filter(function(e){return"before"!==e.options.priority});e:for(;e;)if(t=this.rules.escape.exec(e))e=e.substring(t[0].length),s+=t[1];else{for(var l=0,h=r;l<h.length;l++){if((t=(k=h[l]).rule.exec(e))&&(n[0]=n[1],n[1]=e,!k.options.checkPreChar||k.options.checkPreChar(n[0].charAt(n[0].length-e.length-1)))){e=e.substring(t[0].length),s+=k.render.call(this,t);continue e}}if(t=this.rules.autolink.exec(e)){var a=void 0,u=void 0;e=e.substring(t[0].length),u="@"===t[2]?"mailto:"+(a=this.options.escape(this.mangle(t[1]))):a=this.options.escape(t[1]),s+=this.renderer.link(u,null,a)}else if(!this.inLink&&this.hasRulesGfm&&(t=this.rules.url.exec(e))){a=void 0,u=void 0;t[0]=this.rules._backpedal.exec(t[0])[0],e=e.substring(t[0].length),a=this.options.escape(t[0]),u="@"===t[2]?"mailto:"+a:"www."===t[1]?"http://"+a:a,s+=this.renderer.link(u,null,a)}else if(t=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(t[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(t[0])&&(this.inLink=!1),e=e.substring(t[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer.call(this,t[0]):this.options.escape(t[0]):t[0];else if(t=this.rules.link.exec(e)){e=e.substring(t[0].length),this.inLink=!0;u=t[2];var p=void 0;this.options.pedantic?(c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(u))?(u=c[1],p=c[3]):p="":p=t[3]?t[3].slice(1,-1):"",u=u.trim().replace(/^<([\s\S]*)>$/,"$1"),s+=this.outputLink(t,{href:this.escapes(u),title:this.escapes(p)}),this.inLink=!1}else if(this.hasRulesExtra&&(t=this.rules.fnref.exec(e)))e=e.substring(t[0].length),s+=this.renderer.fnref(this.options.slug(t[1]));else if((t=this.rules.reflink.exec(e))||(t=this.rules.nolink.exec(e))){e=e.substring(t[0].length);var c,g=(t[2]||t[1]).replace(/\s+/g," ");if(!(c=this.links[g.toLowerCase()])||!c.href){s+=t[0].charAt(0),e=t[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(t,c),this.inLink=!1}else if(t=this.rules.strong.exec(e))e=e.substring(t[0].length),s+=this.renderer.strong(this.output(t[4]||t[3]||t[2]||t[1]));else if(t=this.rules.em.exec(e))e=e.substring(t[0].length),s+=this.renderer.em(this.output(t[6]||t[5]||t[4]||t[3]||t[2]||t[1]));else if(t=this.rules.code.exec(e))e=e.substring(t[0].length),s+=this.renderer.codespan(this.options.escape(t[2].trim(),!0));else if(t=this.rules.br.exec(e))e=e.substring(t[0].length),s+=this.renderer.br();else if(this.hasRulesGfm&&(t=this.rules.del.exec(e)))e=e.substring(t[0].length),s+=this.renderer.del(this.output(t[1]));else{for(var f=0,d=o;f<d.length;f++){var k;if((t=(k=d[f]).rule.exec(e))&&(n[0]=n[1],n[1]=e,!k.options.checkPreChar||k.options.checkPreChar(n[0].charAt(n[0].length-e.length-1)))){e=e.substring(t[0].length),s+=k.render.call(this,t);continue e}}if(t=this.rules.text.exec(e))e=e.substring(t[0].length),s+=this.renderer.text(this.options.escape(this.smartypants(t[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}}return s},e.prototype.outputLink=function(e,t){var s=t.href,n=t.title?this.options.escape(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(s,n,this.output(e[1])):this.renderer.image(s,n,this.options.escape(e[1]))},e.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},e.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t="",s=e.length,n=0;n<s;n++){var i=e.charCodeAt(n);Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";"}return t},e.simpleRules=[],e}(),_=function(){function t(e){this.simpleRenderers=[],this.line=0,this.tokens=[],this.token=null,this.footnotes={},this.options=e,this.renderer=this.options.renderer||new v(this.options)}return t.parse=function(e,t,s){return new this(s).parse(t,e)},t.prototype.parse=function(e,t){this.inlineLexer=new w(w,e,this.options,this.renderer),this.inlineTextLexer=new w(w,e,Object.assign({},this.options,{renderer:new R})),this.tokens=t.reverse();for(var s="";this.next();)s+=this.tok();return Object.keys(this.footnotes).length&&(s+=this.renderer.footnote(this.footnotes),this.footnotes={}),this.renderer._headings=[],s},t.prototype.debug=function(e,t){this.inlineLexer=new w(w,e,this.options,this.renderer),this.inlineTextLexer=new w(w,e,Object.assign({},this.options,{renderer:new R})),this.tokens=t.reverse();for(var s="";this.next();){var n=this.tok();this.token.line=this.line+=n.split("\n").length-1,s+=n}return Object.keys(this.footnotes).length&&(s+=this.renderer.footnote(this.footnotes),this.footnotes={}),this.renderer._headings=[],s},t.prototype.next=function(){return this.token=this.tokens.pop()},t.prototype.getNextElement=function(){return this.tokens[this.tokens.length-1]},t.prototype.parseText=function(){for(var t,s=this.token.text;(t=this.getNextElement())&&t.type==e.TokenType.text;)s+="\n"+this.next().text;return this.inlineLexer.output(s)},t.prototype.tok=function(){switch(this.token.type){case e.TokenType.space:return"";case e.TokenType.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case e.TokenType.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case e.TokenType.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.options.unescape(this.inlineTextLexer.output(this.token.text)),this.token.ends);case e.TokenType.listStart:for(var t="",s=this.token.ordered,n=this.token.start,i=!1;this.next().type!=e.TokenType.listEnd;)null!==this.token.checked&&(i=!0),t+=this.tok();return this.renderer.list(t,s,n,i);case e.TokenType.listItemStart:t="";for(var r=this.token.checked;this.next().type!=e.TokenType.listItemEnd;)t+=this.token.type==e.TokenType.text?this.parseText():this.tok();return this.renderer.listitem(t,r);case e.TokenType.looseItemStart:for(t="",r=this.token.checked;this.next().type!=e.TokenType.listItemEnd;)t+=this.tok();return this.renderer.listitem(t,r);case e.TokenType.footnote:return this.footnotes[this.token.refname]=this.inlineLexer.output(this.token.text),"";case e.TokenType.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case e.TokenType.table:var o="",l=(t="",void 0),h=void 0;h="";for(var a=0;a<this.token.header.length;a++){var u={header:!0,align:this.token.align[a]},p=this.inlineLexer.output(this.token.header[a]);h+=this.renderer.tablecell(p,u)}o+=this.renderer.tablerow(h);for(a=0;a<this.token.cells.length;a++){l=this.token.cells[a],h="";for(var c=0;c<l.length;c++)h+=this.renderer.tablecell(this.inlineLexer.output(l[c]),{header:!1,align:this.token.align[c]});t+=this.renderer.tablerow(h)}return this.renderer.table(o,t);case e.TokenType.blockquoteStart:for(t="";this.next().type!=e.TokenType.blockquoteEnd;)t+=this.tok();return this.renderer.blockquote(t);case e.TokenType.hr:return this.renderer.hr();case e.TokenType.html:return this.renderer.html(this.token.text);default:for(a=0;a<this.simpleRenderers.length;a++)if(this.token.type==="simpleRule"+(a+1))return this.simpleRenderers[a].call(this.renderer,this.token.execArr);var g='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(g);console.log(g)}},t}(),S=function(){function s(){}return s.setOptions=function(e){return Object.assign(this.options,e),this},s.setBlockRule=function(e,t){return void 0===t&&(t=function(){return""}),T.simpleRules.push(e),this.simpleRenderers.push(t),this},s.setInlineRule=function(e,t,s){return void 0===s&&(s={}),w.simpleRules.push({rule:e,render:t,options:s}),this},s.inlineParse=function(e,t){return void 0===t&&(t=this.options),new w(w,{},t).output(e)},s.parse=function(e,t){void 0===t&&(t=this.options);try{var s=this.callBlockLexer(e,t),n=s.tokens,i=s.links;return this.callParser(n,i,t)}catch(e){return this.callMe(e)}},s.debug=function(s,n){void 0===n&&(n=this.options);var i=this.callBlockLexer(s,n),r=i.tokens,o=i.links,l=r.slice(),h=new _(n);h.simpleRenderers=this.simpleRenderers;var a=h.debug(o,r);return{tokens:l=l.map(function(s){s.type=e.TokenType[s.type]||s.type;var n=s.line;return delete s.line,n?t({line:n},s):s}),links:o,result:a}},s.callBlockLexer=function(e,t){if(void 0===e&&(e=""),"string"!=typeof e)throw new Error("Expected that the 'src' parameter would have a 'string' type, got '"+typeof e+"'");return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),T.lex(e,t,!0)},s.callParser=function(e,t,s){if(this.simpleRenderers.length){var n=new _(s);return n.simpleRenderers=this.simpleRenderers,n.parse(t,e)}return _.parse(e,t,s)},s.callMe=function(e){if(this.options.silent)return"<p>An error occurred:</p><pre>"+this.options.escape(e.message+"",!0)+"</pre>";throw e},s.options=new y,s.simpleRenderers=[],s}();e.BlockLexer=T,e.escape=l,e.unescape=h,e.slug=c,e.resolveUrl=k,e.noop=x,e.ExtendRegexp=m,e.InlineLexer=w,e.SmarkdownOptions=y,e.Smarkdown=S,e.Parser=_,e.Renderer=v,e.TextRenderer=R,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=smarkdown.min.js.map
